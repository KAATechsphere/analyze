# Список ADR (Архитектурных Решений)

## 1. Выбор микросервисной архитектуры
- **Контекст:** Необходимость масштабируемости, гибкости и независимости компонентов.
- **Решение:** Принята микросервисная архитектура.
- **Причины:** Легкость масштабирования, возможность использования различных технологий для различных сервисов, независимость развертывания и обновления компонентов.
- **Последствия:** Повышенные требования к оркестрации, DevOps и управлению межсервисной коммуникацией.

## 2. Использование геораспределённой системы
- **Контекст:** Необходимо обеспечить высокую доступность и производительность приложения для пользователей, распределённых по всему миру. Геораспределённая система позволит сократить время отклика и улучшить пользовательский опыт.
- **Решение:** Принято решение использовать геораспределённую систему для размещения серверов и баз данных в различных регионах.
- **Причины:** Сокращение времени отклика, высокая доступность, масштабируемость.
- **Последствия:** Сложность управления, синхронизация данных, дополнительные затраты.

## 3. Использование API Gateway
- **Контекст:** Необходимость централизованного управления запросами, маршрутизацией и безопасностью.
- **Решение:** Внедрение API Gateway.
- **Причины:** Централизованная точка входа для всех запросов, улучшенная безопасность, упрощение управления аутентификацией и авторизацией.
- **Последствия:** Потенциальная точка отказа, необходимость высокой доступности и надежности Gateway.

## 4. Межсервисная коммуникация
- **Контекст:** Необходимо выбрать протокол взаимодействия между сервисами в микросервисной архитектуре. Протокол должен обеспечивать высокую производительность, масштабируемость и поддержку различных типов запросов.
- **Решение:** Выбран gRPC для взаимодействия между сервисами.
- **Причины:** gRPC использует протокол Protobuf, который обеспечивает высокую скорость передачи данных и минимизирует накладные расходы, Protobuf позволяет четко определять структуру данных, что упрощает разработку и тестирование. 
- **Последствия:** Требуется обучение команды работе с Protobuf и генерацией кода, gRPC не так универсален, как REST, и может потребовать дополнительных усилий для интеграции с внешними системами.

## 5. Использование Docker и Kubernetes для оркестрации контейнеров
- **Контекст:** Необходимость эффективного управления контейнерами и автоматизации развертывания.
- **Решение:** Внедрение Docker для контейнеризации и Kubernetes для оркестрации.
- **Причины:** Упрощение развертывания, масштабирования и управления приложениями, высокая степень автоматизации.
- **Последствия:** Требуется обучение команды работе с Kubernetes, необходимость настройки и поддержки кластера Kubernetes.

## 6. Выбор баз данных
- **Контекст:** Разнообразие данных и требований к их хранению и доступу.
- **Решение:** Использование комбинации реляционной базы данных (PostgreSQL) и столбцовой базы данных (ClickHouse).
- **Причины:** PostgreSQL для хранения структурированных данных с поддержкой транзакций, ClickHouse для хранения больших объемов данных и выполнения аналитических запросов.
- **Последствия:** Повышенная сложность в управлении данными, необходимость синхронизации между различными типами баз данных.

## 7. Использование системы мониторинга и логирования (Prometheus и ELK)
- **Контекст:** Необходимость обеспечения наблюдаемости и диагностики системы.
- **Решение:** Внедрение Prometheus для мониторинга метрик и ELK (Elasticsearch, Logstash, Kibana) для централизованного логирования.
- **Причины:** Обеспечение полной видимости состояния системы, возможность быстрой диагностики и реагирования на инциденты.
- **Последствия:** Требуется настройка и поддержка инфраструктуры мониторинга и логирования, необходимость управления большими объемами логов и метрик.

## 8. Интеграция с популярными фитнес-устройствами
- **Контекст:** Необходимо интегрировать приложение с популярными фитнес-устройствами и сервисами для отслеживания тренировок.
- **Решение:** Принято решение использовать вендорные решения для интеграции.
- **Причины:** Экономия времени и ресурсов, безопасность и надежность, масштабируемость и производительность, поддержка и обновления.
- **Последствия:** Зависимость от вендора, ограниченные возможности кастомизации.
